let inputFile=document.querySelector("[data-input]"),buttonForm=document.querySelector(".btn_wrap"),message=document.querySelector("[data-message]");inputFile.addEventListener("change",()=>{let fileListArr=inputFile.files,newBtn=document.createElement("button");newBtn.classList.add("download_btn"),newBtn.innerHTML='<i class="fa fa-download" aria-hidden="true"></i>',buttonForm.appendChild(newBtn);for(let file of fileListArr){console.log("file: ",file);const reader=new FileReader;reader.onload=function(){let result=reader.result,newImg=new Image;newImg.src=result,newImg.onload=function(){let widthVal=this.width,heightVal=this.height;const canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.width=widthVal,canvas.height=heightVal,ctx.fillStyle="#ddd",ctx.fillRect(0,0,widthVal,heightVal),ctx.strokeStyle="#444",ctx.textAlign="center",ctx.textBaseline="middle",ctx.font=`${widthVal/5}px Arial`,ctx.strokeText(`${widthVal}x${heightVal}`,widthVal/2,heightVal/2);var savable=canvas.toDataURL().toString().replace("data:image/png;base64,",""),img;zip.folder("images").file(file.name,savable,{base64:!0})}},reader.readAsDataURL(file)}newBtn.addEventListener("click",()=>{zip.generateAsync({type:"blob"}).then((function(content){saveAs(content,"example.zip")}))})});var zip=new JSZip;